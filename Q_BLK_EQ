               .OPTION LIST=SHOW_INCLUDES

;VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV
;
; SEQUENCE BLOCK LIST AND SEQUENCE DIRECTORY DEFINITIONS:
; DIRECTORY CONTAINS ONE ENTRY PER AVAILABLE SEQUENCE,
; BLOCK LIST IS FOR MEMORY MANAGEMENT AND CONTAINS ONE ENTRY PER RAM BLOCK.
; NAMING CONVENTION:  Q_xxx FOR SEQUENCE DIRECTORY, BLOCK LIST VARIABLES.
;
;
; DIRECTORY DEFINITIONS:
;
Q_NAME         EQU     0               ;8 BYTES - SEQUENCE NAME (ASCII CHARS).
;
Q_START_BLK    EQU     Q_NAME+8        ;WORD - INDEX OF RAM BLOCK IN WHICH SEQUENCE STARTS.
;
Q_INIT_TEMPO   EQU     Q_START_BLK+2   ;WORD - SEQUENCE INITIAL TEMPO VALUE - IN usec/CLICK
;
Q_TIME_NUM     EQU     Q_INIT_TEMPO+2  ;WORD - INITIAL TIME SIGNATURE NUMERATOR (# OF BEATS/BAR).
;
Q_TIME_DENOM   EQU     Q_TIME_NUM+2    ;WORD - INITIAL TIME SIGNATURE DENOMINATOR - RAW FORM.
;
Q_TOTAL_BARS   EQU     Q_TIME_DENOM+2  ;WORD - TOTAL NUMBER OF BARS IN SEQUENCE.
;
Q_XS_BEATS     EQU     Q_TOTAL_BARS+2  ;WORD - NOW DEFUNCT (SEE EXPLANATION BELOW).
                                       ;FORMERLY NUMBER OF EXCESS BEATS AT END OF SEQUENCE,
                                       ;       NOT CONFORMING TO OVERALL TIME SIGNATURE.
;
Q_MEM_USED     EQU     Q_XS_BEATS+2    ;WORD - NUMBER OF RAM BLOCKS OCCUPIED BY SEQUENCE.
;
Q_STATUS       EQU     Q_MEM_USED+2    ;WORD - IF = 0, INDICATES SEQUENCE IS EMPTY.
;
Q_RPT_START    EQU     Q_STATUS+2      ;WORD - STARTING BAR NUMBER FOR PLAYBACK REPEAT LOOP.
;
Q_RPT_END      EQU     Q_RPT_START+2   ;WORD - ENDING BAR NUMBER FOR PLAYBACK REPEAT LOOP.
;
Q_RPT_COUNT    EQU     Q_RPT_END+2     ;BYTE - NUMBER OF TIMES FOR PLAYBACK REPEAT LOOP -
                                       ; 0      -  NO REPEATS WHATSOEVER.
                                       ; 1-0FEH -  NUMBER OF REPEATS AFTER FIRST PLAY-THROUGH.
                                       ; 0FFH   -  INFINITE REPEAT UNTIL EXIT-REPT FOOTSWITCH HIT.
;
Q_BLOCK_SIZE   EQU     Q_NAME+32       ;SIZE OF SEQUENCE DIRECTORY ENTRY.
;
;
;
;
; WHY THERE ARE NO "EXCESS BEATS" (Q_XS_BEATS) ANY MORE:
;
; IN MODEL 440 FIRMWARE RELEASES LATER THAN VERSION 1.90,
; THE "EXCESS BEATS" SEQUENCE PARAMETER WAS ELIMINATED AS A WORKING
; CONCEPT AND PARAMETER IN SEQUENCE CREATION/MANIPULATION.
; THIS WAS DONE BECAUSE OF THE LARGE AMOUNT OF EXTRA COMPLEXITY WHICH
; WOULD HAVE BEEN NEEDED IN THE SEQUENCE EDITING UTILITIES IN ORDER TO
; HANDLE THIS PARAMETER CORRECTLY IN ALL CASES (MOST CASES, IN FACT,
; DID NOT HANDLE IT CORRECTLY) - IN ADDITION TO WHICH, THE EXCESS BEATS
; WERE DEALT WITH INTERNALLY AS JUST ANOTHER BAR IN THE SEQUENCE,
; GENERALLY HAVING A DIFFERENT TIME-SIGNATURE NUMERATOR THAN THE REST OF
; THE SEQUENCE, BUT OTHERWISE NO DIFFERENT FROM A NORMAL SEQUENCE BAR.
; (THE FURTHER ASSUMPTION THAT THE EXCESS BEATS WERE AT THE END OF THE
; SEQUENCE WAS NOT NECESSARILY VALID, ESPECIALLY FOLLOWING EDITING.)
; THE SAME THING IS EASILY ACCOMPLISHED USING THE "INSERT" UTILITY,
; WHICH AVOIDS THE BARS-VERSUS-BEATS AMBIGUITY AND ANY ASSMUPTIONS.
;
; FOR COMPATIBILITY WITH SEQUENCES CREATED BEFORE THIS TIME, A ROUTINE
; (KILL_EXCESS_BEATS:SYSFUNS2) WAS CREATED TO GO THROUGH SEQUENCES JUST
; LOADED FROM DISK, AND, RECOGNIZING THAT THEY MAY PRE-DATE THIS CHANGE
; OF SEQUENCE PHILOSOPHY, LOOK FOR ANY WHICH INDICATE EXCESS BEATS ARE
; PRESENT AND ADJUST THEIR DIRECTORY BLOCK INFORMATION SO THAT THE
; EXCESS BEATS ARE REPRESENTED AS AN ADDITIONAL BAR IN THE SEQUENCE -
; THE EXCESS-BEATS PARAMETER IS CLEARED OUT.
; THIS OF COURSE ASSUMES THAT THERE IS NO OTHER WAY FOR SUCH A SEQUENCE
; TO FIND ITS WAY INTO THE 440 ....
;
;AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
               .OPTION LIST="ON"
